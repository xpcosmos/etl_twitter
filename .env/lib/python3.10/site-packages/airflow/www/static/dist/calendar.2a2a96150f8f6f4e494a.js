/*! For license information please see calendar.2a2a96150f8f6f4e494a.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.calendar=e():(t.Airflow=t.Airflow||{},t.Airflow.calendar=e())}(window,(function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=158)}({158:function(t,e,n){n(159),t.exports=n(160)},159:function(t,e,n){"use strict";n.r(e)},160:function(t,e,n){"use strict";n.r(e);var a=n(2);const r=Object(a.c)("grid_url");function o(t){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t]}function s(t,e,n){return moment.utc([t,e,n])}function d(t,e){return s(t,e,1).add(1,"month").subtract(1,"day").date()}const l="YYYY-MM-DD";document.addEventListener("DOMContentLoaded",(()=>{$("span.status_square").tooltip({html:!0});const t=JSON.parse(calendarData),e=d3.tip().attr("class","tooltip d3-tip").html((t=>t));function n(){const n=16;let a=d3.nest().key((t=>moment.utc(t.date,l).year())).key((t=>moment.utc(t.date,l).month())).key((t=>moment.utc(t.date,l).date())).key((t=>t.state)).map(t.dag_states);const c=moment.utc(t.start_date,l).year(),u=moment.utc(t.end_date,l).year();for(let t=c;t<=u;t+=1)a[t]=a[t]||{};a=d3.entries(a).map((t=>({year:t.key,dagStates:t.value}))).sort((t=>t.year));const i=54+(134*a.length+20),f=d3.select("#calendar-svg").attr("width",960).attr("height",i).call(e),p=f.append("g").attr("transform","translate(0, 39)");let m=928;function y(t,e,a=1,r=16){const o=statesColors[e||t],s=statesColors[t];m-=44,p.append("text").attr("x",m).attr("y",8).attr("text-anchor","start").attr("class","status-label").attr("alignment-baseline","middle").text(t),m-=4,m-=r,p.append("g").attr("transform",`translate(${m}, 0)`).selectAll("g").data(d3.range(a)).enter().append("rect").attr("x",(t=>t*(r/a))).attr("width",r/a).attr("height",n).attr("class","day").attr("fill",(t=>o.startsWith("url")?o:d3.interpolateHsl(o,s)(t/a))),m-=4,void 0!==e&&(p.append("text").attr("x",m).attr("y",8).attr("text-anchor","end").attr("class","status-label").attr("alignment-baseline","middle").text(e),m-=44)}y("no_status"),y("planned"),y("running"),y("failed","success",10,100);const g=f.append("g").attr("transform","translate(32, 54)").selectAll("g").data(a).enter().append("g").attr("transform",((t,e)=>`translate(0, ${20+134*e})`));g.append("text").attr("x",-57).attr("transform","rotate(270)").attr("text-anchor","middle").attr("class","year-label").text((t=>t.year)),g.append("g").attr("transform","translate(34, 4)").attr("text-anchor","end").selectAll("g").data(d3.range(7)).enter().append("text").attr("y",(t=>(t+.5)*n)).attr("class","day-label").text(o);const h=g.append("g").attr("transform","translate(48, 0)").append("g").selectAll("g").data((t=>d3.range(12).map((e=>({year:t.year,month:e,dagStates:t.dagStates[e]||{}}))))).enter().append("g").attr("transform",(t=>`translate(${function(t,e){const n=s(t,0,1).day(),a=s(t,e,1).dayOfYear();return Math.floor((a+n-1)/7)}(t.year,t.month)*n}, 0)`));h.selectAll("g").data((t=>d3.range(d(t.year,t.month)).map((e=>{const n=e+1,a=t.dagStates[n]||{};return{year:t.year,month:t.month,day:n,dagStates:a}})))).enter().append("rect").attr("x",(t=>function(t,e,n){const a=s(t,e,1).day(),r=s(t,e,n).date();return Math.floor((r+a-1)/7)}(t.year,t.month,t.day)*n)).attr("y",(t=>s(t.year,t.month,t.day).day()*n)).attr("width",n).attr("height",n).attr("class","day").attr("fill",(t=>{const e=e=>(t.dagStates[e]||[{count:0}])[0].count;if(e("running")>0)return statesColors.running;const n=e("success"),a=e("failed");if(n+a===0){return e("planned")>0?statesColors.planned:statesColors.no_status}let r;if(0===a)r=0;else{const t=.5;r=t+a/(a+n)*(1-t)}return d3.interpolateHsl(statesColors.success,statesColors.failed)(r)})).on("click",(t=>{var e;window.location.href=(e=s(t.year,t.month,t.day).add(1,"day").subtract(1,"ms"),`${r}?base_date=${encodeURIComponent(e.toISOString())}`)})).on("mouseover",(function(t){const n=(t=>{const e=d3.entries(t.dagStates).map((t=>`${t.value[0].count} ${t.key}`)),n=s(t.year,t.month,t.day);return`<strong>${o(n.day())} ${n.format(l)}</strong><br>${e.join("<br>")}`})(t);e.direction("n"),e.show(n,this)})).on("mouseout",(function(t){e.hide(t,this)})),h.selectAll("g").data((t=>[t])).enter().append("path").attr("class","month").style("fill","none").attr("d",(t=>{const e=s(t.year,t.month,1).day(),a=s(t.year,t.month,1).add(1,"month").day(),r=function(t,e){const n=s(t,e,1).day();return Math.floor((d(t,e)+n)/7)+1}(t.year,t.month);return d3.svg.line()([[0,e*n],[n,e*n],[n,0],[r*n,0],[r*n,a*n],[(r-1)*n,a*n],[(r-1)*n,112],[0,112],[0,e*n]])}))}$("#loading").remove(),n()}))},2:function(t,e,n){"use strict";function a(t){const e=document.querySelector(`meta[name="${t}"]`);return e?e.getAttribute("content"):null}n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));const r=()=>new Map([["success",0],["failed",0],["upstream_failed",0],["up_for_retry",0],["up_for_reschedule",0],["running",0],["deferred",0],["sensing",0],["queued",0],["scheduled",0],["skipped",0],["no_status",0]]),o=(t,e)=>{const n=t.includes("?")?"&":"?";return`${t}${n}${e}`}}})}));