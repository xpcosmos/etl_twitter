/*! For license information please see connectionForm.a535a35050296de193d3.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.connectionForm=t():(e.Airflow=e.Airflow||{},e.Airflow.connectionForm=t())}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=99)}({2:function(e,t,n){"use strict";function r(e){const t=document.querySelector(`meta[name="${e}"]`);return t?t.getAttribute("content"):null}n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));const o=()=>new Map([["success",0],["failed",0],["upstream_failed",0],["up_for_retry",0],["up_for_reschedule",0],["running",0],["deferred",0],["sensing",0],["queued",0],["scheduled",0],["skipped",0],["no_status",0]]),a=(e,t)=>{const n=e.includes("?")?"&":"?";return`${e}${n}${t}`}},99:function(e,t,n){"use strict";n.r(t);var r=n(2);const o="True"===Object(r.c)("rest_api_enabled"),a=Object(r.c)("test_url");function i(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}$(document).ready((()=>{const e=document.getElementById("field_behaviours"),t=JSON.parse(i(e.textContent)),n=i(document.getElementById("testable_connection_types").textContent),r=document.getElementById("model_form");r&&r.setAttribute("autocomplete","off");const l=document.getElementById("conn_id").parentElement.parentElement.parentElement,s=function(){const e=new Map;return Array.from(document.querySelectorAll("[id^='extra__'")).forEach((t=>{const n=t.id.indexOf("__","extra__".length),r=t.id.substring("extra__".length,n),o=e.has(r)?e.get(r):[];o.push(t.parentElement.parentElement),e.set(r,o)})),e}(),c=$('<button id="test-connection" type="button" class="btn btn-sm btn-primary" style="margin-left: 3px; pointer-events: all">Test\n <i class="fa fa-rocket"></i></button>');function u(e){Array.from(s.values()).forEach((e=>{e.filter((e=>e.parentElement===l)).forEach((e=>l.removeChild(e)))}));var r;(s.get(e)||[]).forEach((e=>l.appendChild(e))),Array.from(document.querySelectorAll("label[data-orig-text]")).forEach((e=>{e.innerText=e.dataset.origText,delete e.dataset.origText})),Array.from(document.querySelectorAll(".form-control")).forEach((e=>{e.placeholder="",e.parentElement.parentElement.classList.remove("hide")})),(r=t[e])&&(Array.isArray(r.hidden_fields)&&r.hidden_fields.forEach((e=>{document.getElementById(e).parentElement.parentElement.classList.add("hide")})),r.relabeling&&Object.keys(r.relabeling).forEach((e=>{const t=document.querySelector(`label[for='${e}']`);t.dataset.origText=t.innerText,t.innerText=r.relabeling[e]})),r.placeholders&&Object.keys(r.placeholders).forEach((e=>{const t=r.placeholders[e];document.getElementById(e).placeholder=t}))),o&&function(e,t){const n=document.getElementById("test-connection");t.includes(e)?$(n).prop("disabled",!1).removeAttr("title"):$(n).prop("disabled",!0).attr("title","This connection type does not currently support testing via Airflow REST API.")}(e,n)}function d(e,t){const n=e?"alert-success":"alert-error";let r=$(".container .row .alert");r.length?(r.removeClass("alert-success").removeClass("alert-error"),r.addClass(n),r.text(t),r.show()):(r=$(`<div class="alert ${n}">\n<button type="button" class="close" data-dismiss="alert">Ã—</button>\n${t}</div>`),$(".container .row").prepend(r).show())}function f(e){const t={},n={},r=$(e).serializeArray();return $.each(r,(function(){if("conn_id"===this.name)t.connection_id=this.value;else if(""!==this.value&&"port"===this.name)t[this.name]=Number(this.value);else if(""!==this.value&&"csrf_token"!==this.name)if("extra"===this.name){let e;try{e=JSON.parse(this.value)}catch(e){throw e instanceof SyntaxError&&d(!1,"Extra field value is not valid JSON."),e}Object.entries(e).forEach((([e,t])=>{n[e]=t}))}else this.name.startsWith("extra__")?(n[this.name]=this.value,n[this.name.replace(/extra__.+?__/,"")]=this.value):t[this.name]=this.value})),t.extra=JSON.stringify(n),JSON.stringify(t)}o||$(c).prop("disabled",!0).attr("title","Airflow REST APIs have been disabled. See api->auth_backends section of the Airflow configuration."),$(c).insertAfter($("form#model_form div.well.well-sm button:submit")),$("#test-connection").on("click",(e=>{e.preventDefault(),$.ajax({url:a,type:"post",contentType:"application/json",dataType:"json",data:f("form#model_form"),success(e){d(e.status,e.message)},error(e,t,n){d(!1,n)}})}));const m=document.getElementById("conn_type");$(m).on("change",(e=>{u(e.target.value)})),u(m.value)}))}})}));