/*! For license information please see graph.b8e0cf29c6779137d053.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.graph=t():(e.Airflow=e.Airflow||{},e.Airflow.graph=t())}(window,(function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=109)}({109:function(e,t,n){n(110),e.exports=n(111)},110:function(e,t,n){"use strict";n.r(t)},111:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n(5),r=n(19),d=n(12);const s=Object(a.c)("dag_id"),i=Object(a.c)("execution_date"),l=Object(a.c)("dag_run_id"),c=Object(a.c)("arrange"),u=Object(a.c)("task_instances_url"),m=Object(a.c)("is_scheduler_running"),f=new Map,p=`${u}?dag_id=${encodeURIComponent(s)}&execution_date=${encodeURIComponent(i)}`,h={success:!1,running:!1,failed:!1,skipped:!1,upstream_failed:!1,up_for_reschedule:!1,up_for_retry:!1,queued:!1,deferred:!1,no_status:!1},g=()=>!Object.values(taskInstances).map((e=>e.state)).some((e=>-1===["success","failed","upstream_failed","skipped","removed"].indexOf(e))),_=d3.tip().attr("class","tooltip d3-tip").html((e=>e)),b=new dagreD3.graphlib.Graph({compound:!0}).setGraph({nodesep:30,ranksep:15,rankdir:c}).setDefaultEdgeLabel((()=>({lineInterpolate:"basis"}))),v=dagreD3.render(),x=d3.select("#graph-svg");let k=d3.select("#graph-svg g");const w=(e,t)=>{let n=!1,{label:a}=e.value;if(tasks[e.id]&&tasks[e.id].is_mapped){const n=t[e.id]&&t[e.id].mapped_states?t[e.id].mapped_states.length:" ";a=`${e.id} [${n}]`}if(b.node(e.id)&&b.node(e.id).label!==a&&(b.node(e.id).label=a,n=!0),e.children){return e.children.map((e=>w(e,t))).some((e=>e))}return n};function y(e){if(b.hasNode(e)){const t=b.node(e);void 0!==t.children&&t.children.forEach((e=>{y(e.id)}))}b.removeNode(e)}function O(e,t){t.children.forEach((e=>{y(e.id)})),P(t).forEach((t=>f.set(t,e))),t=b.node(e),edges.forEach((e=>{const t=f.get(e.source_id),n=f.get(e.target_id);t===n||b.hasEdge(t,n)||b.setEdge(t,n,{curve:d3.curveBasis,arrowheadClass:"arrowhead"})})),j(),J(e),function(e,t){const n=q();Y(t).forEach((e=>n.delete(e))),localStorage.setItem(L(),JSON.stringify(Array.from(n)))}(0,t)}function j(){k.remove(),k=x.append("g"),k.call(v,b),k.call(_),d3.selectAll("g.cluster").on("click",(e=>{if(d3.event.defaultPrevented)return;O(e,b.node(e))})),d3.selectAll("g.node").on("click",(e=>{const t=b.node(e);if(void 0!==t.children&&Object.keys(t.children).length>0){if(d3.event.defaultPrevented)return;Z(e,t),j(),J(e)}else if(e in taskInstances){const t=tasks[e],n=taskInstances[e].try_number||0;let a=[];t.is_mapped&&(a=taskInstances[e].mapped_states),Object(d.callModal)({taskId:e,executionDate:i,extraLinks:t.extra_links,tryNumber:n,isSubDag:"SubDagOperator"===t.task_type,dagRunId:l,mapIndex:t.map_index,isMapped:t.is_mapped,mappedStates:a})}})),d3.selectAll("g.node").on("mouseover",(function(e){d3.select(this).selectAll("rect").attr("data-highlight","highlight"),A(b.predecessors(e)),A(b.successors(e));const t=[e,...b.predecessors(e),...b.successors(e)];d3.selectAll("g.nodes g.node").filter((e=>!t.includes(e))).attr("data-highlight","fade"),d3.selectAll("g.edgePath")[0].forEach((t=>{const n=b.nodeEdges(e).includes(t.__data__)?"highlight":"fade";d3.select(t).attr("data-highlight",n)})),d3.selectAll("g.edgeLabel")[0].forEach((t=>{b.nodeEdges(e).includes(t.__data__)||d3.select(t).attr("data-highlight","fade")}))})),d3.selectAll("g.node").on("mouseout",(function(e){d3.select(this).selectAll("rect, circle").attr("data-highlight",null),I(b.predecessors(e)),I(b.successors(e)),d3.selectAll("g.node, g.edgePath, g.edgeLabel").attr("data-highlight",null),localStorage.removeItem(B())})),U(taskInstances),function(){S=d3.behavior.zoom().on("zoom",(()=>{k.attr("transform",`translate(${d3.event.translate})scale(${d3.event.scale})`)})),x.call(S);const e=b.graph().width,t=b.graph().height,n=80,a=x.node().getBoundingClientRect(),o=a.width-2*n,r=a.height-n,d=Math.min(Math.min(o/e,r/t),1.5);S.translate([o/2-e*d/2+n,n]),S.scale(d),S.event(k)}()}let S=null;function A(e){e.forEach((e=>{const t=b.node(e).elem;d3.select(t).selectAll("rect, circle").attr("data-highlight","highlight")}))}function I(e){e.forEach((e=>{const t=b.node(e).elem;d3.select(t).selectAll("rect, circle").attr("data-highlight",null)}))}function T(){d3.selectAll("g.node, g.edgePaths, g.edgeLabel").attr("data-highlight",null),localStorage.removeItem(B())}function E(e,t,n){d3.selectAll("g.node, g.edgePaths, g.edgeLabel").attr("data-highlight","fade"),d3.selectAll(`g.node.${e}`).attr("data-highlight",null),d3.selectAll(`g.node.${e} rect`).attr("data-highlight",null),d3.select(t).style("background-color",n)}function z(e){Object.keys(h).forEach((e=>{({}).hasOwnProperty.call(h,e)&&(h[e]=!1)})),null!=e&&(h[e]=!0)}d3.selectAll(".js-state-legend-item").on("mouseover",(function(){if(!M()){E($(this).data("state"))}})).on("mouseout",(()=>{M()||T()})),d3.selectAll(".js-state-legend-item").on("click",(function(){const e=$(this).data("state");if(T(),h[e])z(),d3.selectAll(".js-state-legend-item").style("background-color",null);else{E(e,this,d3.select(this).style("border-color")),z(e)}})),d3.select("#searchbox").on("keyup",(()=>{const e=document.getElementById("searchbox").value;if(""===e)return;let t=null;if(M()&&(T(),z()),d3.selectAll("g.nodes g.node").filter((function(n){return""===e?(d3.selectAll("g.edgePaths, g.edgeLabel").attr("data-highlight",null),d3.select(this).attr("data-highlight",null)):(d3.selectAll("g.edgePaths, g.edgeLabel").attr("data-highlight","fade"),!function(e,t){if(e.indexOf(t)>-1)return!0;const n=b.node(e);if(n.children)return!!P(n).find((e=>e.indexOf(t)>-1));return!1}(n,e)?d3.select(this).attr("data-highlight","fade"):(t||(t=this),d3.select(this).attr("data-highlight",null))),null})),t){const e=d3.transform(d3.select(t).attr("transform")),n=x.node().getBoundingClientRect();e.translate=[n.width/2-e.translate[0],n.height/2-e.translate[1]],e.scale=[1,1],null!=S&&(S.translate(e.translate),S.scale(1),S.event(k))}}));const M=()=>!!Object.keys(h).find((e=>h[e]));let H;function D(){$("#auto_refresh").is(":checked")?H=setInterval((()=>{N()}),1e3*autoRefreshInterval):clearInterval(H)}let C;function N(){$("#loading-dots").css("display","inline-block"),$.get(p).done((e=>{if(C!==e){taskInstances=JSON.parse(e),U(taskInstances);w(nodes,taskInstances)&&j();g()&&($("#auto_refresh").prop("checked",!1),clearInterval(H))}C=e,setTimeout((()=>{$("#loading-dots").hide()}),500),$("#error").hide()})).fail(((e,t,n)=>{const a=e.responseJSON&&e.responseJSON.error||"Something went wrong.";$("#error_msg").text(`${t}: ${n} ${a}`),$("#error").show(),setTimeout((()=>{$("#loading-dots").hide()}),500),$("#chart_section").hide(1e3),$("#datatable_section").hide(1e3)}))}function R(){const e=localStorage.getItem("disableAutoRefresh"),t=g();$("#auto_refresh").prop("checked",!(e||t)&&"True"===m),D(),d3.select("#refresh_button").on("click",(()=>N()))}function U(e){b.nodes().forEach((t=>{const n=b.node(t),{elem:d}=n,s=t;if(d){const i=`node enter ${function(e,t){const n=b.node(e);if(void 0===n.children)return e in t&&t[e].state||"no_status";const a=P(n),o=new Set;a.forEach((e=>{if(e in t){const{state:n}=t[e];o.add(null==n?"no_status":n)}}));return["failed","upstream_failed","up_for_retry","up_for_reschedule","queued","scheduled","sensing","running","shutdown","restarting","removed","no_status","success","skipped"].find((e=>o.has(e)))||"no_status"}(t,e)}`;d.setAttribute("class",i),d.setAttribute("data-toggle","tooltip"),d.onmouseover=t=>{let l;s in e?l=Object(r.default)(e[s]):n.children?l=function(e,t){const n=Object(a.b)();let r,d;P(e).forEach((e=>{if(e in t){const a=t[e];r&&!moment(a.start_date).isBefore(r)||(r=moment(a.start_date)),d&&!moment(a.end_date).isAfter(d)||(d=moment(a.end_date));const o=null==a.state?"no_status":a.state;n.has(o)&&n.set(o,n.get(o)+1)}}));const s=convertSecsToHumanReadable(moment(d).diff(r,"second"));let i=`\n    ${e.tooltip?`<p>${e.tooltip}</p>`:""}\n    <strong>Duration:</strong> ${s} <br><br>\n  `;return n.forEach(((e,t)=>{e>0&&(i+=`<strong>${Object(o.escapeHtml)(t)}:</strong> ${e} <br>`)})),i}(n,e):s in tasks&&(l=Object(r.taskNoInstanceTooltip)(s,tasks[s]),d.setAttribute("class",`${i} not-allowed`)),l&&_.show(l,t.target)},d.onmouseout=_.hide,d.onclick=_.hide}}))}function P(e){const t=[];return Object.values(e.children).forEach((e=>{if(void 0===e.children)t.push(e.id);else{P(e).forEach((e=>t.push(e)))}})),t}function Y(e){const t=[e.id];return Object.entries(e.children).forEach((([,e])=>{if(void 0!==e.children){Y(e).forEach((e=>t.push(e)))}})),t}function L(){return`expandedGroups_${s}`}function B(){return`focused_group_${s}`}function J(e){if(null!=e&&null!=S){const{x:t}=b.node(e),{width:n,height:a}=x.node().getBoundingClientRect();let o=d3.selectAll("g.node").filter((t=>t===e)).select("rect");o.empty()&&(o=d3.selectAll("g.cluster").filter((t=>t===e)).select("rect"));const[r,d]=[o[0][0].attributes.width.value,o[0][0].attributes.height.value],s=.9*Math.min(Math.min(n/r,a/d),1.5),[i,l]=[n/2-t*s,5];S.translate([i,l]),S.scale(s),S.event(k.transition().duration(500));const c=new Set(b.children(e));d3.selectAll("g.nodes g.node").forEach((function(t){t===e||c.has(t)?d3.select(this).attr("data-highlight",null):d3.select(this).attr("data-highlight","fade")})),localStorage.setItem(B(),e)}}function Z(e,t){t.children.forEach((t=>{if(b.setNode(t.id,t.value),f.set(t.id,t.id),b.node(t.id).id=t.id,void 0!==t.children){b.node(t.id).children=t.children,P(t).forEach((e=>f.set(e,t.id)))}null!=e&&b.setParent(t.id,e)})),edges.forEach((e=>{const t=f.get(e.source_id),n=f.get(e.target_id);t!==n&&!b.hasEdge(t,n)&&t&&n&&b.setEdge(t,n,{curve:d3.curveBasis,arrowheadClass:"arrowhead",label:e.label})})),b.edges().forEach((t=>{e!==t.v&&e!==t.w||b.removeEdge(t.v,t.w)})),function(e){const t=q();t.add(e),localStorage.setItem(L(),JSON.stringify(Array.from(t)))}(e)}function q(){let e;try{e=new Set(JSON.parse(localStorage.getItem(L())))}catch{e=new Set}return e}document.addEventListener("visibilitychange",(()=>{document.hidden?clearInterval(H):R()})),$("#auto_refresh").change((()=>{$("#auto_refresh").is(":checked")?(N(),localStorage.removeItem("disableAutoRefresh")):localStorage.setItem("disableAutoRefresh","true"),D()})),function(){const e=new Set(Y(nodes));let t=q();t=Array.from(t).filter((t=>e.has(t))),localStorage.setItem(L(),JSON.stringify(t))}();const G=localStorage.getItem(B()),F=q();Z(null,nodes),function e(t,n){void 0!==n.children&&n.children.forEach((n=>{t.has(n.id)&&(Z(n.id,b.node(n.id)),e(t,n))}))}(F,nodes),w(nodes,taskInstances),j(),b.hasNode(G)&&J(G),R()},12:function(e,t,n){"use strict";n.r(t),n.d(t,"dagTZ",(function(){return d})),n.d(t,"callModal",(function(){return w}));var a=n(2),o=n(3);$(window).on("load",(function(){$(`a[href*="${this.location.pathname}"]`).parent().addClass("active"),$(".never_active").removeClass("active")}));const r=Object(a.c)("dag_id"),d=Object(a.c)("dag_timezone"),s=Object(a.c)("logs_with_metadata_url"),i=Object(a.c)("external_log_url"),l=Object(a.c)("extra_links_url"),c=Object(a.c)("paused_url"),u={createAfter:Object(a.c)("next_dagrun_create_after"),intervalStart:Object(a.c)("next_dagrun_data_interval_start"),intervalEnd:Object(a.c)("next_dagrun_data_interval_end")};let m,f="",p="",h="",g="",_=[];const b="True"===Object(a.c)("show_external_log_redirect"),v=Array.from(document.querySelectorAll('a[id^="btn_"][data-base-url]')).reduce(((e,t)=>(e[t.id.replace("btn_","")]=t,e)),{});function x(e,t){let n=e.dataset.baseUrl;t.dag_id&&-1!==e.dataset.baseUrl.indexOf(r)&&(n=n.replace(r,t.dag_id),delete t.dag_id),Object.prototype.hasOwnProperty.call(t,"map_index")&&void 0===t.map_index&&delete t.map_index,e.setAttribute("href",`${n}?${$.param(t)}`)}function k(){x(v.subdag,{dag_id:h,execution_date:p}),x(v.task,{dag_id:r,task_id:f,execution_date:p,map_index:m}),x(v.rendered,{dag_id:r,task_id:f,execution_date:p,map_index:m}),x(v.mapped,{_flt_3_dag_id:r,_flt_3_task_id:f,_flt_3_run_id:g,_oc_TaskInstanceModelView:"map_index"}),v.rendered_k8s&&x(v.rendered_k8s,{dag_id:r,task_id:f,execution_date:p,map_index:m});const e={_flt_3_dag_id:r,_flt_3_task_id:f,_oc_TaskInstanceModelView:"dag_run.execution_date"};m>=0&&(e._flt_0_map_index=m),x(v.ti,e),x(v.log,{dag_id:r,task_id:f,execution_date:p,map_index:m}),x(v.xcom,{dag_id:r,task_id:f,execution_date:p,map_index:m})}function w({taskId:e,executionDate:t,extraLinks:n,tryNumber:a,isSubDag:d,dagRunId:c,mapIndex:u,isMapped:v=!1,mappedStates:x=[]}){f=e;const w=String(window.location);if($("#btn_filter").on("click",(()=>{window.location=function(e,t,n){const a=new RegExp(`([?&])${t}=.*?(&|$)`,"i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(a)?e.replace(a,`$1${t}=${n}$2`):`${e}${o}${t}=${n}`}(w,"root",f)})),p=t,g=c,m=u,v&&(_=x),$("#dag_run_id").text(c),$("#task_id").text(e),$("#execution_date").text(Object(o.f)(t)),$("#taskInstanceModal").modal({}),$("#taskInstanceModal").css("margin-top","0"),$("#extra_links").prev("hr").hide(),$("#extra_links").empty().hide(),u>=0?($("#modal_map_index").show(),$("#modal_map_index .value").text(u)):($("#modal_map_index").hide(),$("#modal_map_index .value").text("")),d?($("#div_btn_subdag").show(),h=`${r}.${e}`):($("#div_btn_subdag").hide(),h=void 0),u>=0&&!_.length)$("#modal_map_index").show(),$("#modal_map_index .value").text(u),$("#mapped_dropdown").hide();else if(u>=0||v){$("#modal_map_index").show(),$("#modal_map_index .value").text(""),$("#mapped_dropdown").show();const e=m>-1?m:`All  ${_.length} Mapped Instances`;$("#mapped_dropdown #dropdown-label").text(e),$("#mapped_dropdown .dropdown-menu").empty(),$("#mapped_dropdown .dropdown-menu").append(`<li><a href="#" class="map_index_item" data-mapIndex="all">All ${_.length} Mapped Instances</a></li>`),_.forEach(((e,t)=>{$("#mapped_dropdown .dropdown-menu").append(`<li><a href="#" class="map_index_item" data-mapIndex="${t}">${t} - ${e}</a></li>`)}))}else $("#modal_map_index").hide(),$("#modal_map_index .value").text(""),$("#mapped_dropdown").hide();v?($("#task_actions").text(`Task Actions for all ${x.length} instances`),$("#btn_mapped").show(),$("#mapped_dropdown").css("display","inline-block"),$("#btn_rendered").hide(),$("#btn_xcom").hide(),$("#btn_log").hide(),$("#btn_task").hide()):($("#task_actions").text("Task Actions"),$("#btn_rendered").show(),$("#btn_xcom").show(),$("#btn_log").show(),$("#btn_mapped").hide(),$("#btn_task").show()),$("#dag_dl_logs").hide(),$("#dag_redir_logs").hide(),a>0&&!v&&($("#dag_dl_logs").show(),b&&$("#dag_redir_logs").show()),k(),$("#try_index > li").remove(),$("#redir_log_try_index > li").remove();const y=a>2?0:1,O=new URLSearchParams({dag_id:r,task_id:f,execution_date:p,metadata:"null"});void 0!==u&&O.set("map_index",u);for(let e=y;e<a;e+=1){let t=e;0!==e?O.set("try_number",e):t="All",$("#try_index").append(`<li role="presentation" style="display:inline">\n      <a href="${s}?${O}&format=file"> ${t} </a>\n      </li>`),(0!==e||b)&&$("#redir_log_try_index").append(`<li role="presentation" style="display:inline">\n      <a href="${i}?${O}"> ${t} </a>\n      </li>`)}if(O.delete("try_number"),n&&n.length>0){const e=[];n.sort(),$.each(n,((t,n)=>{O.set("link_name",n);const a=$('<a href="#" class="btn btn-primary disabled"></a>'),o=$('<span class="tool-tip" data-toggle="tooltip" style="padding-right: 2px; padding-left: 3px" data-placement="top" title="link not yet available"></span>');o.append(a),a.text(n),$.ajax({url:`${l}?${O}`,cache:!1,success(e){a.attr("href",e.url),/^(?:[a-z]+:)?\/\//.test(e.url)&&a.attr("target","_blank"),a.removeClass("disabled"),o.tooltip("disable")},error(e){o.tooltip("hide").attr("title",e.responseJSON.error).tooltip("fixTitle")}}),e.push(o)}));const t=$("#extra_links");t.prev("hr").show(),t.append(e).show(),t.find('[data-toggle="tooltip"]').tooltip()}}document.addEventListener("click",(e=>{e.target.matches('button[data-toggle="button"]')&&k()})),$(document).on("click",".map_index_item",(function(){const e=$(this).attr("data-mapIndex");w("all"===e?{taskId:f,executionDate:p,dagRunId:g,mapIndex:-1,isMapped:!0,mappedStates:_}:{taskId:f,executionDate:p,dagRunId:g,mapIndex:e})})),$("form[data-action]").on("submit",(function(e){e.preventDefault();const t=$(this).get(0);(g||p)&&(t.dag_run_id&&(t.dag_run_id.value=g),t.execution_date&&(t.execution_date.value=p),t.origin.value=window.location,t.task_id&&(t.task_id.value=f),t.map_index&&m>=0?t.map_index.value=m:t.map_index&&t.map_index.remove(),t.action=$(this).data("action"),t.submit())})),$("#pause_resume").on("change",(function(){const e=$(this),t=e.data("dag-id"),n=e.is(":checked"),a=`${c}?is_paused=${n}&dag_id=${encodeURIComponent(t)}`;e.trigger("blur"),e.removeClass("switch-input--error");const o=new Event("paused");o.value=n,o.key="isPaused",document.dispatchEvent(o),$.post(a).fail((()=>{setTimeout((()=>{e.prop("checked",!n),e.addClass("switch-input--error"),o.value=!n,document.dispatchEvent(o)}),500)}))})),$("#next-run").on("mouseover",(()=>{$("#next-run").attr("data-original-title",(()=>{let e="";return u.createAfter&&(e+=`<strong>Run After:</strong> ${Object(o.f)(u.createAfter)}<br>`,e+=`Next Run: ${Object(o.b)(u.createAfter)}<br><br>`),u.intervalStart&&u.intervalEnd&&(e+="<strong>Data Interval</strong><br>",e+=`Start: ${Object(o.f)(u.intervalStart)}<br>`,e+=`End: ${Object(o.f)(u.intervalEnd)}`),e}))}))},19:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i})),n.d(t,"taskNoInstanceTooltip",(function(){return l}));var a=n(5),o=n(3),r=n(12),d=n(2);function s(e,t){const n=t&&t instanceof moment&&t.isValid();return`Started: ${e.format(o.d)}<br>Ended: ${n?t.format(o.d):"Not ended yet"}<br>`}function i(e,{includeTryNumber:t=!1}={}){let n="";if(void 0!==e.state&&(n+=`<strong>Status:</strong> ${Object(a.escapeHtml)(e.state)}<br><br>`),e.mapped_states){const t=Object(d.b)();e.mapped_states.forEach((e=>{const n=e||"no_status";t.has(n)&&t.set(n,t.get(n)+1)})),n+=`<strong>${Object(a.escapeHtml)(e.mapped_states.length)} ${1===e.mapped_states.length?"Task":"Tasks"} Mapped</strong><br />`,t.forEach(((e,t)=>{e>0&&(n+=`<span style="margin-left: 15px">${Object(a.escapeHtml)(t)}: ${Object(a.escapeHtml)(e)}</span><br />`)})),n+="<br />"}if(void 0!==e.task_id&&(n+=`Task_id: ${Object(a.escapeHtml)(e.task_id)}<br>`),n+=`Run: ${Object(o.f)(e.execution_date)}<br>`,void 0!==e.run_id&&(n+=`Run Id: <nobr>${Object(a.escapeHtml)(e.run_id)}</nobr><br>`),e.map_index>=0&&!e.mapped_states&&(n+=`Map Index: ${Object(a.escapeHtml)(e.map_index)}<br>`),void 0!==e.operator&&(n+=`Operator: ${Object(a.escapeHtml)(e.operator)}<br>`),"running"===e.state){const t=e.start_date instanceof moment?e.start_date:moment(e.start_date);e.duration=moment().diff(t,"second")}else if(!e.duration&&e.end_date){const t=e.start_date instanceof moment?e.start_date:moment(e.start_date),n=e.end_date instanceof moment?e.end_date:moment(e.end_date);e.duration=moment(n).diff(t,"second")}n+=`Duration: ${Object(a.escapeHtml)(convertSecsToHumanReadable(e.duration))}<br>`;const i=e.data_interval_start,l=e.data_interval_end;return i&&l&&(n+="<br><strong>Data Interval:</strong><br>",n+=`Start: ${Object(o.f)(i)}<br>`,n+=`End: ${Object(o.f)(l)}<br>`),t&&(n+=`Try Number: ${Object(a.escapeHtml)(e.try_number)}<br>`),n+=function(e,t,n){if(!e)return"<br><em>Not yet started</em>";const a="z (Z)",o=moment.defaultZone.name.toUpperCase(),r=moment.utc(e),d=moment.utc(t),i=n.toUpperCase();let l="<br><strong>UTC:</strong><br>";l+=s(r,d),"UTC"!==o&&(r.tz(o),l+=`<br><strong>Local: ${r.format(a)}</strong><br>`,l+=s(r,d&&d instanceof moment?d.tz(o):d));"UTC"!==i&&i!==o&&(r.tz(i),l+=`<br><strong>DAG's TZ: ${r.format(a)}</strong><br>`,l+=s(r,d&&d instanceof moment?d.tz(i):d));return l}(e.start_date,e.end_date,r.dagTZ||"UTC"),n}function l(e,t){let n="";return e&&(n+=`Task_id: ${Object(a.escapeHtml)(e)}<br>`),void 0!==t.task_type&&(n+=`Operator: ${Object(a.escapeHtml)(t.task_type)}<br>`),n+="<br><em>DAG has yet to run.</em>",n}window.tiTooltip=i,window.taskNoInstanceTooltip=l},2:function(e,t,n){"use strict";function a(e){const t=document.querySelector(`meta[name="${e}"]`);return t?t.getAttribute("content"):null}n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));const o=()=>new Map([["success",0],["failed",0],["upstream_failed",0],["up_for_retry",0],["up_for_reschedule",0],["running",0],["deferred",0],["sensing",0],["queued",0],["scheduled",0],["skipped",0],["no_status",0]]),r=(e,t)=>{const n=e.includes("?")?"&":"?";return`${e}${n}${t}`}},3:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"k",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"h",(function(){return l})),n.d(t,"j",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"l",(function(){return m})),n.d(t,"i",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"b",(function(){return h}));const a="YYYY-MM-DD, HH:mm:ss",o="YYYY-MM-DDTHH:mm:ss.SSS",r="YYYY-MM-DD, HH:mm:ss z",d="z (Z)",s="YYYY-MM-DDThh:mm:ssTZD",i="timezone";function l(e){return e instanceof moment?e.isUTC()?"UTC":e.format(d):"UTC"===e?e:moment().tz(e).format(d)}function c(e,t){const n=moment(e),o=$.extend({title:!0},t).title,r=document.createElement("time");return r.setAttribute("datetime",n.format()),o&&r.setAttribute("title",n.isUTC()?"":`UTC: ${n.clone().utc().format()}`),r.innerText=n.format(a),r}const u=e=>moment(e).format(r);function m(e){moment.tz.setDefault(e),$('time[data-datetime-convert!="false"]').each(((e,t)=>{const n=$(t),o=moment(n.attr("datetime"));o._isValid&&n.text(o.format(n.data("with-tz")?r:a)),void 0!==n.attr("title")&&n.attr("title",o.isUTC()?"":`UTC: ${o.clone().utc().format()}`)})),$(".datetime input").each(((e,t)=>{t.value=moment(t.value).format()}))}const f=(e,t)=>moment(t||void 0).diff(e||void 0),p=e=>{const t=moment.duration(e),n=t.days();return`${n>0?`${n}d`:""}${moment.utc(t.as("milliseconds")).format("HH:mm:ss")}`},h=e=>`${moment(e).fromNow()}`},5:function(e,t,n){"use strict";n.r(t),n.d(t,"escapeHtml",(function(){return s})),n.d(t,"convertSecsToHumanReadable",(function(){return i}));var a=n(3);function o(){const e=moment();$("#clock").attr("datetime",e.format(a.c)).html(`${e.format("HH:mm")} <strong>${Object(a.h)(e)}</strong>`)}function r(e){localStorage.setItem("selected-timezone",e);const t=new Event(a.a);t.value=e,t.key="selected-timezone",document.dispatchEvent(t),Object(a.l)(e),o(),$("body").trigger({type:"airflow.timezone-change",timezone:e})}window.isoDateToTimeEl=a.j,window.moment=Airflow.moment;const d=document.createElement("span");function s(e){return d.textContent=e,d.innerHTML}function i(e){const t=e,n=t-Math.floor(t);e=Math.floor(e);const a=Math.floor(e/3600);e-=3600*a;const o=Math.floor(e/60);let r="";return a>0&&(r+=`${a}Hours `),o>0&&(r+=`${o}Min `),(e-=60*o)+n>0&&(Math.floor(t)===t?r+=`${e}Sec`:r+=`${(e+=n).toFixed(3)}Sec`),r}window.escapeHtml=s,window.convertSecsToHumanReadable=i,window.postAsForm=function(e,t){const n=$("<form></form>");n.attr("method","POST"),n.attr("action",e),$.each(t||{},((e,t)=>{const a=$("<input></input>");a.attr("type","hidden"),a.attr("name",e),a.attr("value",t),n.append(a)}));const a=$("<input></input>");a.attr("type","hidden"),a.attr("name","csrf_token"),a.attr("value",csrfToken),n.append(a),$(document.body).append(n),n.submit()},$(document).ready((()=>{!function(){const e=moment.tz.guess(),t=localStorage.getItem("selected-timezone"),n=localStorage.getItem("chosen-timezone");function o(t){localStorage.setItem("chosen-timezone",t),t!==e||t!==Airflow.serverTimezone?($("#timezone-manual a").data("timezone",t).text(Object(a.h)(t)),$("#timezone-manual").show()):$("#timezone-manual").hide()}n&&o(n),r(t||Airflow.defaultUITimezone),"UTC"!==Airflow.serverTimezone&&($("#timezone-server a").html(`${Object(a.h)(Airflow.serverTimezone)} <span class="label label-primary">Server</span>`),$("#timezone-server").show()),Airflow.serverTimezone!==e?$("#timezone-local a").attr("data-timezone",e).html(`${Object(a.h)(e)} <span class="label label-info">Local</span>`):$("#timezone-local").hide(),$("a[data-timezone]").click((e=>{r($(e.currentTarget).data("timezone"))})),$("#timezone-other").typeahead({source:$(moment.tz.names().map((e=>({category:e.split("/",1)[0],name:e.replace("_"," "),tzName:e})))),showHintOnFocus:"all",showCategoryHeader:!0,items:"all",afterSelect(e){this.$element.val(""),o(e.tzName),r(e.tzName),setTimeout((()=>{document.activeElement.blur(),this.shown=!1,this.focused=!1}),1)}})}(),$("#clock").attr("data-original-title",hostName).attr("data-placement","bottom").parent().show(),o(),setInterval(o,1e3),$.ajaxSetup({beforeSend(e,t){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(t.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",csrfToken)}}),$.fn.datetimepicker.defaults.format="YYYY-MM-DD HH:mm:ssZ",$.fn.datetimepicker.defaults.sideBySide=!0,$(".datetimepicker").datetimepicker(),$("#filter_form a.filter").click((()=>{$(".datetimepicker").datetimepicker()})),$(".js-tooltip").tooltip()}))}})}));